# ================================================================
# RUM Shop - AWS Deployment Configuration
# ================================================================
# Fill in ALL <YOUR_...> values before running:
#   ./scripts/deploy-aws.sh
#
# For teardown (stop billing):
#   ./scripts/teardown-aws.sh
# ================================================================

# -------------------------------------------
# AWS Account & Region
# -------------------------------------------
AWS_REGION=<YOUR_AWS_REGION>
AWS_ACCOUNT_ID=<YOUR_AWS_ACCOUNT_ID>
# AWS_PROFILE=default  # uncomment if using a named profile

# -------------------------------------------
# Stack / Environment Name
# -------------------------------------------
ENVIRONMENT=production
APP_NAME=rumshop

# -------------------------------------------
# Datadog - API & App Keys
# -------------------------------------------
# API Key: https://app.datadoghq.com/organization-settings/api-keys
# App Key: https://app.datadoghq.com/organization-settings/application-keys
DD_API_KEY=<YOUR_DATADOG_API_KEY>
DD_APP_KEY=<YOUR_DATADOG_APP_KEY>
DD_SITE=datadoghq.com
DD_ENV=production
DD_VERSION=1.0.0

# -------------------------------------------
# Datadog - RUM (Frontend Browser Monitoring)
# -------------------------------------------
# Create RUM app: https://app.datadoghq.com/rum/application/create
DD_RUM_APPLICATION_ID=<YOUR_DD_RUM_APPLICATION_ID>
DD_RUM_CLIENT_TOKEN=<YOUR_DD_RUM_CLIENT_TOKEN>

# -------------------------------------------
# EC2 Configuration (Java Order Service)
# -------------------------------------------
# FINOPS: Intentionally oversized. The app needs t3.small.
# m5.xlarge gives Datadog enough data to recommend a downsize.
# Options: m5.large | m5.xlarge | m5.2xlarge | c5.xlarge | r5.large
EC2_INSTANCE_TYPE=m5.xlarge
EC2_KEY_PAIR_NAME=<YOUR_EC2_KEY_PAIR_NAME>

# -------------------------------------------
# ECS Fargate Configuration (Node.js services)
# -------------------------------------------
# FINOPS: Intentionally oversized. Services need 256 CPU / 512 MB.
# 1024/2048 gives Datadog enough data to recommend a downsize.
ECS_CLUSTER_NAME=rumshop-cluster
FARGATE_CPU=1024
FARGATE_MEMORY=2048

# -------------------------------------------
# S3 / CloudFront (Frontend)
# -------------------------------------------
# Auto-generated from stack name + account ID. No need to change.
# S3_FRONTEND_BUCKET is set automatically by the deploy script.

# -------------------------------------------
# Auth / JWT
# -------------------------------------------
JWT_SECRET=<YOUR_JWT_SECRET_FOR_PRODUCTION>

# ================================================================
# COST ESTIMATE (monthly, us-east-1 pricing)
# ================================================================
# EC2 m5.xlarge (on-demand):     ~$140/month
#   → ideal t3.small:            ~$15/month   (savings: ~$125)
#
# ECS Fargate x3 tasks (1024/2048):
#   → 3 × ~$36/month =          ~$108/month
#   → ideal 256/512 = 3 × ~$9 = ~$27/month   (savings: ~$81)
#
# Lambda (3 functions):          ~$0-5/month  (negligible at lab scale)
# NAT Gateway:                   ~$32/month
# ALB:                           ~$16/month
# S3 + CloudFront:               ~$1/month
# Datadog Agent on EC2:          included
#
# TOTAL ESTIMATED:               ~$297/month
# TOTAL AFTER RIGHT-SIZING:      ~$91/month
# POTENTIAL SAVINGS:             ~$206/month (69%)
#
# Run ./scripts/teardown-aws.sh when done with the lab!
# ================================================================
