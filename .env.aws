# ================================================================
# RUM Shop - AWS Deployment Configuration
# ================================================================
# Fill in ALL <YOUR_...> values before running:
#   ./scripts/deploy-aws.sh
#
# For teardown (stop billing):
#   ./scripts/teardown-aws.sh
# ================================================================

# -------------------------------------------
# AWS Account & Region
# -------------------------------------------
AWS_REGION=<YOUR_AWS_REGION>
AWS_ACCOUNT_ID=<YOUR_AWS_ACCOUNT_ID>
# AWS_PROFILE=default  # uncomment if using a named profile

# -------------------------------------------
# Stack / Environment Name
# -------------------------------------------
ENVIRONMENT=production
APP_NAME=rumshop

# -------------------------------------------
# Datadog - API & App Keys
# -------------------------------------------
# API Key: https://app.datadoghq.com/organization-settings/api-keys
# App Key: https://app.datadoghq.com/organization-settings/application-keys
DD_API_KEY=<YOUR_DATADOG_API_KEY>
DD_APP_KEY=<YOUR_DATADOG_APP_KEY>
DD_SITE=datadoghq.com
DD_ENV=production
DD_VERSION=1.0.0

# -------------------------------------------
# Datadog - RUM (Frontend Browser Monitoring)
# -------------------------------------------
# Create RUM app: https://app.datadoghq.com/rum/application/create
DD_RUM_APPLICATION_ID=<YOUR_DD_RUM_APPLICATION_ID>
DD_RUM_CLIENT_TOKEN=<YOUR_DD_RUM_CLIENT_TOKEN>

# -------------------------------------------
# EC2 Configuration (Java Order Service)
# -------------------------------------------
# FINOPS: Oversized — app needs t3.small (2 vCPU, 2 GB).
# t3.large (2 vCPU, 8 GB) is 4x memory for Datadog to recommend downsizing.
EC2_INSTANCE_TYPE=t3.large
EC2_KEY_PAIR_NAME=<YOUR_EC2_KEY_PAIR_NAME>

# -------------------------------------------
# ECS Fargate Configuration (Node.js services)
# -------------------------------------------
# FINOPS: Oversized — services need 256 CPU / 512 MB.
# 512/1024 is 2x for Datadog to recommend downsizing.
ECS_CLUSTER_NAME=rumshop-cluster
FARGATE_CPU=512
FARGATE_MEMORY=1024

# -------------------------------------------
# S3 / CloudFront (Frontend)
# -------------------------------------------
# Auto-generated from stack name + account ID. No need to change.
# S3_FRONTEND_BUCKET is set automatically by the deploy script.

# -------------------------------------------
# Auth / JWT
# -------------------------------------------
JWT_SECRET=<YOUR_JWT_SECRET_FOR_PRODUCTION>

# ================================================================
# COST ESTIMATE (monthly, us-east-1 pricing)
# ================================================================
# EC2 t3.large (on-demand):      ~$60/month
#   → ideal t3.small:            ~$15/month   (savings: ~$45)
#
# ECS Fargate x3 tasks (512/1024):
#   → 3 × ~$18/month =          ~$54/month
#   → ideal 256/512 = 3 × ~$9 = ~$27/month   (savings: ~$27)
#
# Lambda (3 functions):          ~$0-5/month  (negligible at lab scale)
# NAT Gateway:                   ~$32/month
# ALB:                           ~$16/month
# S3 + CloudFront:               ~$1/month
#
# TOTAL ESTIMATED:               ~$163/month
# TOTAL AFTER RIGHT-SIZING:      ~$91/month
# POTENTIAL SAVINGS:             ~$72/month (44%)
#
# Run ./scripts/teardown-aws.sh when done with the lab!
# ================================================================
